


   <% if flash[:sucess] %>
        <% flash[:sucess].each do |e|  %>

        <div class="alert alert-success" role="alert">
            <p> <%= e %> </p>
       </div>

        <% end %>
      <% end  %>


<%= button_to 'Log out', logout_path, method: :delete, class: "btn-sm btn-info"%>
<br>
 <%= button_to 'Edit Profile', edit_user_path(@user), method: :get, class: "btn-sm btn-info"%>


 <div style="width:300px; height:auto">
       <%= image_tag(@user.profile_pic, style:'width:100%') %>
 </div>



<h1><%= @user.name.capitalize %></h1>

<br>
<h2>All My Items</h2>

<% @user.item.each do |item|%>

<div class="card-deck">
  <div class="card">

    <div class="card-body">
      <h5 class="card-title"><%= item.name %></h5>
    <%= link_to 'View', item_path(item), class:"btn btn-primary" %>
    </div>
  </div>
  </div>

<% end %>

<h2>Hired history</h2>
  <% @user.hired.reverse_each do |hire|%>
    <h4><%= link_to hire.item.name, item_path(hire.item.id) %></h4>
    <h4>Hired on: <%= hire.created_at.strftime("%d-%b-%Y") %></h4>
      <% if hire.hired == true && hire.user_id == @user.id%>
        <h5>Item Status: You are currently hiring this item.</h5>
        <%= button_to 'Return', {:controller => "hires", :action => "update", :item_id => hire.item_id, :user_id=> current_user.id, :hired => 0, :id => hire.id} , :method=>:patch  %>
        <% elsif hire.hired == true && hire.user_id != @user.id%>
        <h5>Item Status: Currently Unavailable</h5>
        <% elsif hire.hired == false %>
        <h5>Item Status: Available</h5>
        <% else %>
        <h5>error somewhere</h5>
      <% end %>
  <% end %>

<%= link_to 'edit me', edit_user_path(@user) %>
<br>
<%= link_to "Add New Item", new_item_path %>
<br>

<h4>Hired history</h4>
